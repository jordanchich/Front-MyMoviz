{"ast":null,"code":"var _jsxFileName = \"/Users/youssef/Documents/LaCapsule/Project/mymoviz/front/src/App.js\";\nimport React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './App.css';\nimport logo from './logo.png';\nimport { Container, Row, Navbar, NavbarBrand, Nav, NavItem, NavLink, Button, PopoverHeader, PopoverBody, Popover, Card, CardImg, CardTitle, CardText, CardBody, Col } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faHeart } from '@fortawesome/free-solid-svg-icons';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.toggle = this.toggle.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleClickLikeOn = this.handleClickLikeOn.bind(this);\n    this.handleClickLikeOff = this.handleClickLikeOff.bind(this);\n    this.state = {\n      popoverOpen: false,\n      viewOnlyLike: false,\n      moviesCount: 0,\n      moviesNameList: [],\n      movies: [],\n      moviesLiked: []\n    };\n  }\n\n  componentWillMount() {\n    this.setState({\n      status: 'Chargement des films en cours ...'\n    });\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:3000/movies').then(response => {\n      return response.json();\n    }).then(data => {\n      console.log(data);\n      this.setState({\n        movies: data.MoviesList\n      });\n    }).catch(error => {});\n    fetch('http://localhost:3000/mymovies').then(response => {\n      return response.json();\n    }).then(data => {\n      console.log(data);\n      var moviesNameListCopy = data.movies.map(movie => {\n        return movie.title;\n      });\n      this.setState({\n        moviesLiked: data.movies,\n        moviesCount: data.movies.length,\n        moviesNameList: moviesNameListCopy\n      });\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  handleClickLikeOn() {\n    console.log(\"Clique detecté\");\n    this.setState({\n      viewOnlyLike: true\n    });\n  }\n\n  handleClickLikeOff() {\n    console.log(\"Clique detecté\");\n    this.setState({\n      viewOnlyLike: false\n    });\n  } //\n\n\n  handleClick(isLike, name) {\n    var moviesNameListCopie = [...this.state.moviesNameList];\n\n    if (isLike) {\n      moviesNameListCopie.push(name);\n      this.setState({\n        moviesCount: this.state.moviesCount + 1,\n        moviesNameList: moviesNameListCopie\n      });\n    } else {\n      var index = moviesNameListCopie.indexOf(name);\n      moviesNameListCopie.splice(index, 1);\n      this.setState({\n        moviesCount: this.state.moviesCount - 1,\n        moviesNameList: moviesNameListCopie\n      });\n    }\n  }\n\n  toggle() {\n    this.setState({\n      popoverOpen: !this.state.popoverOpen\n    });\n  }\n\n  render() {\n    // var MoviesData = [   {     name: \"Alex à Barcelone\",     desc: \"Il incarne\n    // quasiment le club à lui tout seul. Alex le prodige du FC Barcelone\",     img:\n    // \"/pi.jpg\"   }, {     name: \"Lucifer\",     desc: \"Il est chaud, il est\n    // boullant. Attention les filles, ça brule !\",     img: \"/malefique.jpg\"   }, {\n    //     name: \"Very Bad <Code/>\",     desc: \"Parce qu'il achète la maquette d'un\n    // bateau appelé la Licorne, Tintin, un jeune r\",     img: \"/tintin.jpg\"   }, {\n    //    name: \"Lucifer\",     desc: \"Il est chaud, il est boullant. Attention les\n    // filles, ça brule !\",     img: \"/malefique.jpg\"   },   {     name: \"Alex à\n    // Barcelone\",     desc: \"Il incarne quasiment le club à lui tout seul. Alex le\n    // prodige du FC Barcelone\",     img: \"/pi.jpg\"   }, ];\n    var ctx = this;\n    var MoviesList = this.state.movies.map(function (movie, i) {\n      var isLiked = false;\n\n      for (var j = 0; j < ctx.state.moviesLiked.length; j++) {\n        if (ctx.state.moviesLiked[j].idMovieDB === movie.id) {\n          isLiked = true;\n          break;\n        }\n      }\n\n      return React.createElement(Movies, {\n        key: i,\n        isLiked: isLiked,\n        movieId: movie.id,\n        movieName: movie.title,\n        movieDesc: movie.overview,\n        movieImg: movie.poster_path,\n        displayOnlyLike: ctx.state.viewOnlyLike,\n        handleClickParent: ctx.handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      });\n    }); // var moviesNameList = [\"Lucifer\", \"Alex à Barcelone\", \"Les Aventures de\n    // Tintin\"]\n\n    var moviesLast = this.state.moviesNameList.slice(-3);\n\n    if (this.state.moviesCount === 0) {\n      moviesLast = \"aucun film sélectionné\";\n    } else if (this.state.moviesCount > 3) {\n      moviesLast = moviesLast.join(', ') + '...';\n    } else {\n      moviesLast = moviesLast.join(' - ') + '.';\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      className: \"dark\",\n      dark: true,\n      expand: \"md\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(NavbarBrand, {\n      href: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: logo,\n      alt: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    })), React.createElement(Nav, {\n      className: \"ml-auto\",\n      navbar: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(NavItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      href: \"#\",\n      onClick: this.handleClickLikeOff,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Last releases\")), React.createElement(NavItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      href: \"#\",\n      onClick: this.handleClickLikeOn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"My Movies\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(Button, {\n      id: \"Popover1\",\n      type: \"button\",\n      color: \"warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, this.state.moviesCount, \"films\"), React.createElement(Popover, {\n      placement: \"bottom\",\n      isOpen: this.state.popoverOpen,\n      target: \"Popover1\",\n      toggle: this.toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(PopoverHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Derniers films ajout\\xE9s\"), React.createElement(PopoverBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, moviesLast))))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, MoviesList)));\n  }\n\n}\n\nclass Movies extends Component {\n  constructor() {\n    super();\n    this.handleClick = this.handleClick.bind(this);\n    this.state = {\n      liked: false\n    };\n  }\n\n  handleClick() {\n    var isLike = !this.state.like;\n    this.setState({\n      like: isLike\n    });\n\n    if (isLike) {\n      fetch('http://localhost:3000/mymovies', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: \"title=\".concat(this.props.movieName, \"&overview=\").concat(this.props.movieDesc, \"&poster_path=\").concat(this.props.movieImg, \"&idMovieDB=\").concat(this.props.movieId)\n      }).catch(error => {\n        console.error(error);\n      });\n    } else {\n      fetch(\"http://localhost:3000/mymovies/\".concat(this.props.movieId), {\n        method: 'DELETE'\n      }).catch(error => {\n        console.error(error);\n      });\n    }\n\n    ;\n    console.log('clic détecté', isLike);\n    this.props.handleClickParent(isLike, this.props.movieName);\n  }\n\n  render() {\n    var color;\n\n    if (this.state.liked) {\n      color = {\n        color: \"#fc6861\",\n        position: 'absolute',\n        right: '7%',\n        fontSize: '30px',\n        top: '3%',\n        cursor: 'pointer'\n      };\n    } else {\n      color = {\n        position: 'absolute',\n        right: '7%',\n        top: '3%',\n        color: '#fff',\n        fontSize: '30px',\n        cursor: 'pointer'\n      };\n    }\n\n    var isDisplay = {\n      display: 'block'\n    };\n\n    if (!this.state.liked && this.props.displayOnlyLike) {\n      isDisplay.display = 'none';\n    }\n\n    return React.createElement(Col, {\n      xs: \"12\",\n      md: \"4\",\n      sm: \"6\",\n      lg: \"4\",\n      style: isDisplay,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, React.createElement(Card, {\n      className: \"Card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(CardImg, {\n      src: \"..\".concat(this.props.movieImg),\n      alt: \"Card image cap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }), React.createElement(FontAwesomeIcon, {\n      style: color,\n      icon: faHeart,\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }), React.createElement(CardBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(CardTitle, {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, this.props.movieName), React.createElement(CardText, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, this.props.movieDesc))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/youssef/Documents/LaCapsule/Project/mymoviz/front/src/App.js"],"names":["React","Component","logo","Container","Row","Navbar","NavbarBrand","Nav","NavItem","NavLink","Button","PopoverHeader","PopoverBody","Popover","Card","CardImg","CardTitle","CardText","CardBody","Col","FontAwesomeIcon","faHeart","App","constructor","props","toggle","bind","handleClick","handleClickLikeOn","handleClickLikeOff","state","popoverOpen","viewOnlyLike","moviesCount","moviesNameList","movies","moviesLiked","componentWillMount","setState","status","componentDidMount","fetch","then","response","json","data","console","log","MoviesList","catch","error","moviesNameListCopy","map","movie","title","length","isLike","name","moviesNameListCopie","push","index","indexOf","splice","render","ctx","i","isLiked","j","idMovieDB","id","overview","poster_path","moviesLast","slice","join","Movies","liked","like","method","headers","body","movieName","movieDesc","movieImg","movieId","handleClickParent","color","position","right","fontSize","top","cursor","isDisplay","display","displayOnlyLike"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './App.css';\nimport logo from './logo.png';\nimport {\n  Container,\n  Row,\n  Navbar,\n  NavbarBrand,\n  Nav,\n  NavItem,\n  NavLink,\n  Button,\n  PopoverHeader,\n  PopoverBody,\n  Popover,\n  Card,\n  CardImg,\n  CardTitle,\n  CardText,\n  CardBody,\n  Col\n} from 'reactstrap';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faHeart} from '@fortawesome/free-solid-svg-icons';\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.toggle = this\n      .toggle\n      .bind(this);\n    this.handleClick = this\n      .handleClick\n      .bind(this);\n    this.handleClickLikeOn = this\n      .handleClickLikeOn\n      .bind(this);\n    this.handleClickLikeOff = this\n      .handleClickLikeOff\n      .bind(this);\n    this.state = {\n      popoverOpen: false,\n      viewOnlyLike: false,\n      moviesCount: 0,\n      moviesNameList: [],\n      movies: [],\n      moviesLiked: [],\n    };\n  }\n\n  componentWillMount() {\n    this.setState({status: 'Chargement des films en cours ...'});\n  };\n  componentDidMount() {\n    fetch('http://localhost:3000/movies').then((response) => {\n      return response.json();\n    }).then((data) => {\n      console.log(data);\n      this.setState({movies: data.MoviesList});\n    }).catch((error) => {});\n\n    fetch('http://localhost:3000/mymovies').then((response) => {\n      return response.json();\n    }).then((data) => {\n      console.log(data);\n      var moviesNameListCopy = data.movies.map((movie) => {\n          return movie.title;\n        });\n      this.setState({moviesLiked: data.movies, moviesCount: data.movies.length, moviesNameList: moviesNameListCopy});\n    }).catch((error) => {\n      console.error(error);\n    });\n  };\n\n  handleClickLikeOn() {\n    console.log(\"Clique detecté\");\n    this.setState({viewOnlyLike: true});\n  }\n\n  handleClickLikeOff() {\n    console.log(\"Clique detecté\");\n    this.setState({viewOnlyLike: false});\n  }\n  //\n  handleClick(isLike, name) {\n    var moviesNameListCopie = [...this.state.moviesNameList];\n    if (isLike) {\n      moviesNameListCopie.push(name);\n      this.setState({\n        moviesCount: this.state.moviesCount + 1,\n        moviesNameList: moviesNameListCopie\n      });\n    } else {\n      var index = moviesNameListCopie.indexOf(name)\n      moviesNameListCopie.splice(index, 1);\n      this.setState({\n        moviesCount: this.state.moviesCount - 1,\n        moviesNameList: moviesNameListCopie\n      });\n    }\n  }\n\n  toggle() {\n    this.setState({\n      popoverOpen: !this.state.popoverOpen\n    });\n  }\n  render() {\n\n    // var MoviesData = [   {     name: \"Alex à Barcelone\",     desc: \"Il incarne\n    // quasiment le club à lui tout seul. Alex le prodige du FC Barcelone\",     img:\n    // \"/pi.jpg\"   }, {     name: \"Lucifer\",     desc: \"Il est chaud, il est\n    // boullant. Attention les filles, ça brule !\",     img: \"/malefique.jpg\"   }, {\n    //     name: \"Very Bad <Code/>\",     desc: \"Parce qu'il achète la maquette d'un\n    // bateau appelé la Licorne, Tintin, un jeune r\",     img: \"/tintin.jpg\"   }, {\n    //    name: \"Lucifer\",     desc: \"Il est chaud, il est boullant. Attention les\n    // filles, ça brule !\",     img: \"/malefique.jpg\"   },   {     name: \"Alex à\n    // Barcelone\",     desc: \"Il incarne quasiment le club à lui tout seul. Alex le\n    // prodige du FC Barcelone\",     img: \"/pi.jpg\"   }, ];\n    var ctx = this;\n    var MoviesList = this.state.movies.map(function (movie, i) {\n        var isLiked = false;\n        for (var j = 0; j < ctx.state.moviesLiked.length; j++) {\n          if (ctx.state.moviesLiked[j].idMovieDB === movie.id) {\n            isLiked = true;\n            break;\n          }\n        }\n        return <Movies\n          key={i}\n          isLiked={isLiked}\n          movieId={movie.id}\n          movieName={movie.title}\n          movieDesc={movie.overview}\n          movieImg={movie.poster_path}\n          displayOnlyLike={ctx.state.viewOnlyLike}\n          handleClickParent={ctx.handleClick}/>;\n      });\n\n    // var moviesNameList = [\"Lucifer\", \"Alex à Barcelone\", \"Les Aventures de\n    // Tintin\"]\n\n    var moviesLast = this\n      .state\n      .moviesNameList\n      .slice(-3);\n\n    if (this.state.moviesCount === 0) {\n      moviesLast = \"aucun film sélectionné\";\n    } else if (this.state.moviesCount > 3) {\n      moviesLast = moviesLast.join(', ') + '...';\n    } else {\n      moviesLast = moviesLast.join(' - ') + '.';\n    }\n\n    return (\n      <div>\n        <Container>\n          <Navbar className=\"dark\" dark expand=\"md\">\n            <NavbarBrand href=\"/\"><img src={logo} alt=\"logo\"/></NavbarBrand>\n            <Nav className=\"ml-auto\" navbar>\n              <NavItem >\n                <NavLink href=\"#\" onClick={this.handleClickLikeOff}>\n                  Last releases\n                </NavLink>\n              </NavItem>\n              <NavItem >\n                <NavLink href=\"#\" onClick={this.handleClickLikeOn}>\n                  My Movies\n                </NavLink>\n              </NavItem>\n              <div>\n                <Button id=\"Popover1\" type=\"button\" color=\"warning\">\n                  {this.state.moviesCount}\n                  films\n                </Button>\n                <Popover\n                  placement=\"bottom\"\n                  isOpen={this.state.popoverOpen}\n                  target=\"Popover1\"\n                  toggle={this.toggle}>\n                  <PopoverHeader>Derniers films ajoutés</PopoverHeader>\n                  <PopoverBody>\n                    {moviesLast}\n                  </PopoverBody>\n                </Popover>\n              </div>\n            </Nav>\n          </Navbar>\n          <Row>\n            {MoviesList}\n          </Row>\n        </Container>\n      </div>\n    );\n  }\n}\n\nclass Movies extends Component {\n  constructor() {\n    super();\n    this.handleClick = this\n      .handleClick\n      .bind(this);\n    this.state = {\n      liked: false\n    };\n  }\n\n  handleClick() {\n    var isLike = !this.state.like;\n    this.setState({like: isLike});\n    if (isLike) {\n      fetch('http://localhost:3000/mymovies', {\n        method: 'POST', headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n        body: `title=${this.props.movieName}&overview=${this.props.movieDesc}&poster_path=${this.props.movieImg}&idMovieDB=${this.props.movieId}`\n      }).catch((error) => {\n        console.error(error);\n      });\n    } else {\n      fetch(`http://localhost:3000/mymovies/${this.props.movieId}`, {method: 'DELETE'}).catch((error) => {\n        console.error(error);\n      });\n    };\n    console.log('clic détecté', isLike);\n    this\n      .props\n      .handleClickParent(isLike, this.props.movieName);\n  }\n\n  render() {\n    var color;\n    if (this.state.liked) {\n      color = {\n        color: \"#fc6861\",\n        position: 'absolute',\n        right: '7%',\n        fontSize: '30px',\n        top: '3%',\n        cursor: 'pointer'\n      };\n    } else {\n      color = {\n        position: 'absolute',\n        right: '7%',\n        top: '3%',\n        color: '#fff',\n        fontSize: '30px',\n        cursor: 'pointer'\n      }\n    }\n\n    var isDisplay = {\n      display: 'block'\n    }\n\n    if (!this.state.liked && this.props.displayOnlyLike) {\n      isDisplay.display = 'none';\n    }\n\n    return (\n\n      <Col xs=\"12\" md=\"4\" sm=\"6\" lg=\"4\" style={isDisplay}>\n        <Card className=\"Card\">\n          <CardImg src={`..${this.props.movieImg}`} alt=\"Card image cap\"/>\n          <FontAwesomeIcon style={color} icon={faHeart} onClick={this.handleClick}/>\n          <CardBody>\n            <CardTitle className=\"title\">{this.props.movieName}</CardTitle>\n            <CardText>{this.props.movieDesc}</CardText>\n          </CardBody>\n        </Card>\n      </Col>\n\n    );\n  }\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}